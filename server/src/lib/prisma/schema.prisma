// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
            provider = "prisma-client-js"
}

datasource db {
            provider = "postgresql"
            url      = env("DATABASE_URL")
}

enum Role {
            USER
            ADMIN
}

model Idea {
            id String @id @default(cuid())

            message String

            user      User   @relation(fields: [author], references: [id], onDelete: Cascade)
            author    String
            voteCount Int    @default(0)

            upvotes   Upvote[]
            downvotes Downvote[]

            dateAdded DateTime @default(now())

            @@map("ideas")
}

model Upvote {
            id String @id @default(cuid())

            idea   Idea   @relation(fields: [ideaId], references: [id], onDelete: Cascade)
            ideaId String

            user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
            userId String

            createdAt DateTime @default(now())

            @@map("upvotes")
}

model Downvote {
            id String @id @default(cuid())

            idea   Idea   @relation(fields: [ideaId], references: [id], onDelete: Cascade)
            ideaId String

            user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
            userId String

            createdAt DateTime @default(now())

            @@map("downvotes")
}

model User {
            id String @id @unique

            verified          Boolean
            username          String  @unique
            name              String
            profile_image_url String
            role              Role    @default(USER)
            ideas             Idea[]

            upvotedIdeas   Upvote[]
            downvotedIdeas Downvote[]

            createdAt DateTime @default(now())

            @@map("users")
}
